-- 사용자 계정 생성
CREATE USER c##TEST1 IDENTIFIED BY TEST;


-- 접속 권한 및 테이블 생성 권한 부여
GRANT CONNECT, RESOURCE TO c##TEST1;


-- 테이블스페이스 설정
ALTER USER C##TEST1 DEFAULT TABLESPACE USERS QUOTA UNLIMITED ON USERS;

--1.
DROP TABLE TEACHER;
CREATE TABLE TEACHER(
    TEACHER_ID NUMBER PRIMARY KEY,
    NAME VARCHAR2(21) NOT NULL,
    EMAIL VARCHAR2(40) UNIQUE,
    HIRE_DATE DATE,
    SUBJECT VARCHAR2(40)
);

COMMENT ON COLUMN TEACHER.TEACHER_ID IS '강사 고유번호';
COMMENT ON COLUMN TEACHER.NAME IS '강사이름';
COMMENT ON COLUMN TEACHER.EMAIL IS '이메일';
COMMENT ON COLUMN TEACHER.HIRE_DATE IS '입사일';
COMMENT ON COLUMN TEACHER.SUBJECT IS '전공분야';

INSERT INTO TEACHER 
VALUES(3001, '홍길동', 'aaa@naver.com', '10/01/02', '정보통신');

INSERT INTO TEACHER 
VALUES(3002, '홍길서', 'bbb@naver.com', '13/03/02', '컴퓨터소프트웨어');

INSERT INTO TEACHER 
VALUES(3003, '홍길남', 'ccc@naver.com', '11/02/02', '멀티미디어');

INSERT INTO TEACHER 
VALUES(3004, '홍길북', 'ddd@naver.com', '16/04/02', '전기전자');

INSERT INTO TEACHER 
VALUES(3005, '홍길중', 'eee@naver.com', '18/06/02', '신소재');


DROP TABLE LECTURE;
CREATE TABLE LECTURE(
    LECTURE_ID NUMBER PRIMARY KEY,
    TITLE VARCHAR2(40) NOT NULL, 
    TEACHER_ID NUMBER REFERENCES TEACHER(TEACHER_ID),
    INDEX_COUNT NUMBER DEFAULT 0,
    CATEGORY VARCHAR2(40),
    START_DATE DATE NOT NULL,
    END_DATE DATE
);

COMMENT ON COLUMN LECTURE.LECTURE_ID IS '강의 고유번호';
COMMENT ON COLUMN LECTURE.TITLE IS '강의 제목';
COMMENT ON COLUMN LECTURE.TEACHER_ID IS '강의 담당 강사의 ID';
COMMENT ON COLUMN LECTURE.INDEX_COUNT IS '수강인원';
COMMENT ON COLUMN LECTURE.CATEGORY IS '강의 분류';
COMMENT ON COLUMN LECTURE.START_DATE IS '강의 시작일';
COMMENT ON COLUMN LECTURE.END_DATE IS '강의 종료일';

INSERT INTO LECTURE 
VALUES(2001, '포인터', 3001, 24, 'C', '21/04/07', '21/07/07');

INSERT INTO LECTURE 
VALUES(2002, '인터페이스', 3003, 34, 'JAVA', '25/05/08', '25/08/08');

INSERT INTO LECTURE 
VALUES(2003, 'DML/DCL/TCL/DDL', 3004, 30, 'SQL', '24/06/09', '24/09/09');

INSERT INTO LECTURE 
VALUES(2004, '웹프로그래밍', 3002, 28, 'HTML', '25/01/04', '25/04/04');

INSERT INTO LECTURE 
VALUES(2005, '앱프로그래밍', 3005, 22, 'JAVA', '22/04/07', '22/07/07');

DROP TABLE STUDENT;
CREATE TABLE STUDENT(
    STUDENT_ID NUMBER PRIMARY KEY,
    NAME VARCHAR2(21) NOT NULL,
    GRADE NUMBER NOT NULL,
    EMAIL VARCHAR2(40),
    JOIN_DATE DATE
);

COMMENT ON COLUMN STUDENT.STUDENT_ID IS '수강생 고유번호';
COMMENT ON COLUMN STUDENT.NAME IS '수강생 이름';
COMMENT ON COLUMN STUDENT.GRADE IS '학년 또는 수강 등급';
COMMENT ON COLUMN STUDENT.EMAIL IS '수강생 이메일';
COMMENT ON COLUMN STUDENT.JOIN_DATE IS '등록일';

INSERT INTO STUDENT 
VALUES(1001, '심청이', 4, 'FFF@NAVER.COM', '25/03/02');

INSERT INTO STUDENT 
VALUES(1002, '심청삼', 2, 'GGG@NAVER.COM', '25/03/02');

INSERT INTO STUDENT 
VALUES(1003, '심청사', 1, 'HHH@NAVER.COM', '25/03/02');

INSERT INTO STUDENT 
VALUES(1004, '심청오', 3, 'III@NAVER.COM', '25/03/02');

INSERT INTO STUDENT 
VALUES(1005, '심청육', 1, 'JJJ@NAVER.COM', '25/03/02');

INSERT INTO STUDENT 
VALUES(1006, '심청칠', 3, 'KKK@NAVER.COM', '25/03/02');

INSERT INTO STUDENT 
VALUES(1007, '심청팔', 2, 'LLL@NAVER.COM', '25/03/02');

DROP TABLE ENROLLMENT;
CREATE TABLE ENROLLMENT(
    ENROLL_ID NUMBER PRIMARY KEY,
    STUDENT_ID NUMBER REFERENCES STUDENT,
    LECTURE_ID NUMBER REFERENCES LECTURE,
    ENROLL_DATE DATE NOT NULL,
    STATUS CHAR(1) CHECK(STATUS IN('Y', 'N')) NOT NULL,
    GRADE_SCORE NUMBER
);

COMMENT ON COLUMN ENROLLMENT.ENROLL_ID IS '수강기록 고유번호';
COMMENT ON COLUMN ENROLLMENT.STUDENT_ID IS '수강생 ID';
COMMENT ON COLUMN ENROLLMENT.LECTURE_ID IS '강의 ID';
COMMENT ON COLUMN ENROLLMENT.ENROLL_DATE IS '수강 등록일';
COMMENT ON COLUMN ENROLLMENT.STATUS IS '수강 상태';
COMMENT ON COLUMN ENROLLMENT.GRADE_SCORE IS '성적점수';

INSERT INTO ENROLLMENT 
VALUES(1, 1001, 2001, '25/03/02', 'Y', 90);

INSERT INTO ENROLLMENT 
VALUES(2, 1003, 2005, '25/03/02', 'Y', 97);

INSERT INTO ENROLLMENT 
VALUES(3, 1002, 2002, '25/03/02', 'Y', 100);

INSERT INTO ENROLLMENT 
VALUES(4, 1005, 2003, '25/03/02', 'Y', 88);

INSERT INTO ENROLLMENT 
VALUES(5, 1004, 2004, '25/03/02', 'Y', 79);

INSERT INTO ENROLLMENT 
VALUES(6, 1003, 2003, '25/03/02', 'Y', 81);

INSERT INTO ENROLLMENT 
VALUES(7, 1006, 2001, '25/03/02', 'Y', 99);

INSERT INTO ENROLLMENT 
VALUES(8, 1007, 2002, '25/03/02', 'Y', 91);

--------------------------------------------------------------------------------
--문제 5번 검토 부분
INSERT INTO ENROLLMENT 
VALUES(9, 1001, 2005, '25/03/02', 'Y', 90);

DELETE FROM ENROLLMENT WHERE ENROLL_ID = 9;
